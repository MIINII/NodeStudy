# ğŸ–¥ NODE.js

> ì‚¬ìš©ìì—ê²Œ ë°ì´í„°ë¥¼ íšŒì‹ í•˜ëŠ” ì½”ë“œë¥¼ ì„œë²„ì—ì„œ ì‘ì„±í•´ì„œ í´ë¼ì´ì–¸íŠ¸ê°€ ì‚¬ìš©í•˜ê²Œ

## :mouse_trap: ë…¸ë“œì˜ ì‚¬ìš©ì²˜

1. ğŸŒŸ ì„œë²„ ìš´ìš© : ì„œë²„ ìì²´ë¥¼ ìŠ¤ìŠ¤ë¡œ ì‘ì„±í•˜ê²Œ..? ì½”ë“œê°€ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì„ ì²˜ë¦¬í•´ì„œ ë‹¤ë¥¸ ì½”ë“œë¡œ ë³´ë‚´ì¤€
   ë‹¤.
2. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ìš´ìš© : ìš”ì²­ë°›ì€ ë°ì´í„° ì²˜ë¦¬, ë°ì´í„°ë² ì´ìŠ¤ í™œìš© ë“±...
3. ì‘ë‹µ ì‚¬ì´ë“œë„ ì²˜ë¦¬ : ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ë§Œì´ ì•„ë‹ˆë¼ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë°ì´í„°ë¥¼ íšŒì‹ í• ìˆ˜ë„ ìˆìŒ

```js
//ê¸°ë³¸ ì‚¬ìš© ë°©ë²•
const fs = require('fs'); // require : ë…¸ë“œ ì½”ì–´ ëª¨ë“ˆ ë¶ˆëŸ¬ì˜¤ê¸°, fs:FileSystem

fs.writeFileSync('hello.txt', 'hello from Node.js'); // writeFileSync : í•˜ë“œ ë“œë¼ì´ë¸Œì— íŒŒì¼ì„ ìƒì„±
```

## :pen: ë…¸ë“œ ê°•ì˜ ìˆœì„œ

- [#3 | ê¸°ë³¸ê°œë…ì´í•´](https://kmooc.udemy.com/course/nodejs-mvc-rest-apis-graphql-deno/learn/lecture/30288790#overview)
- #5 | express.jsì‘ì—…
- #6 | ejsë¶€ë¶„

### :blue_book: REPL(Read, Eval, Print, Loop)

- Read : ì‚¬ìš©ì ì…ë ¥ê°’ì„ ì½ê¸°
- Evaluate : ì‚¬ìš©ì ì…ë ¥ê°’ì„ í‰ê°€
- Print : ê²°ê³¼ê°’ ì¶œë ¥
- Loop : ìƒˆë¡œìš´ ì…ë ¥ê°’ ê¸°ë‹¤ë¦¼

---

# ğŸ’ 3ê°• : ë…¸ë“œ ê¸°ë³¸ ê°œë… ì´í•´

## ğŸ•¸ ì›¹ ì‘ë™ ë°©ì‹

ì‘ë‹µê³¼ ìš”ì²­ì€ ëª¨ë‘ `header`ë¥¼ ê°€ì§€ê³  ìˆë‹¤.

- `header` : ì‘ë‹µ, ìš”ì²­ì— ì²¨ë¶€ë˜ëŠ” ë©”íƒ€ ë°ì´í„°ë¡œ ë‚´ìš©ì´ ë¬´ì—‡ì¸ì§€ ì•Œë ¤ì¤€ë‹¤
- HTTP / HTTPS : ìœ íš¨í•œ ìš”ì²­ì´ ì–´ë–¤í˜•íƒœë¥¼ ì§€ë‹ˆê³  ì–´ë–¤ ë°ì´í„°ê°€ ì „ì†¡ë˜ì–´ì•¼í• ì§€ ì •ì˜

## ğŸª› Node ì„œë²„ ìƒì„±í•´ë³´ê¸°

```jsx
// app.js
const http = require('http');

// CreateServer(requestListener?:(request : ë“¤ì–´ì˜¤ëŠ” ëª¨ë“  ìš”ì²­ì„ ì‹¤í–‰í•˜ëŠ” ê¸°ëŠ¥))
// ì„œë²„ë¥¼ ìƒì„±í• ë•Œ í•„ìš”í•œ ë©”ì„œë“œ -> ëª¨ë“  ìš”ì²­ì„ ë°›ì„ë•Œì—ëŠ” ì†Œê´„í˜¸ ì“°ì§€ë§ê±¸ì•„
// http.createServer(rqListener);
const server = http.createServer((req, res) => {
  console.log(req);
});

// listen(port, hostname) : Nodeê°€ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë°”ë¡œ ì¢…ë£Œí•˜ì§€ì•Šê³  **ê³„ì† ì‹¤í–‰**ë˜ë©´ì„œ ë“£ë„ë¡ í•œë‹¤.
server.listen(3000);
```

`node app.js`

## â›‘ï¸ ì½”ì–´ ëª¨ë“ˆ

1. `http` -> ì„œë²„ë¥¼ ì¶œì‹œí•˜ê±°ë‚˜ ìš”ì²­ì„ ë³´ë‚´ëŠ”ê²ƒê³¼ ê°™ì€ ì‘ì—…ì— ë„ì›€, ì—¬ëŸ¬ ì„œë²„ê°„ì— ì†Œí†µ ê°€ëŠ¥
2. `https` -> ëª¨ë“  ì „ì†¡ ë°ì´í„°ê°€ ì•”í˜¸í™”ë˜ëŠ” SSL ì•”í˜¸í™” ì„œë²„ë¥¼ ì¶œì‹œí•˜ëŠ”ë° ë„ì›€
3. `fs`
4. `path`
5. `os`

## ğŸ›¼ ìš”ì²­ ê°ì²´ ë‹¤ë£¨ê¸°

```jsx
const server = http.createServer((req, res) => {
  console.log(req.url, req.method, req.headers);
});
```

## ğŸ“« ì‘ë‹µ ì „ì†¡

> `GET`ë©”ì„œë“œë¥¼ ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤

`setHeader(StringName, StringValue)` -> name í—¤ë”ì˜ ê°’ì„ Valueë¡œ ì§€ì •í•œë‹¤

```jsx
const server = http.createServer((req, res) => {
  console.log(req.url, req.method, req.headers);
  // process.exit(); // ëŒ€ê²Œ ì‚¬ìš©í•  ì¼ì´ ì—†ë‹¤~~

  // setHeader(String Name, String Value)
  res.setHeader('Content-Type', 'text/html');

  // write
  res.write('<html>');
  res.write('<head><title>My First Page</title></head>');
  res.write('<bode><h1>í—¬ë¡œ</h1></bode>');
  res.write('</html>');

  res.end(); // ì´ë°‘ìœ¼ë¡œ ì•„ë¬´ê²ƒë„ ì ìœ¼ë©´ ì•ˆëœë‹¤
});
```

## ğŸ Router ìš”ì²­

- `writeFileSync`
- `setHeader('ìœ„ì¹˜ì§€ì •', ë¸Œë¼ìš°ì €ê°€ ìˆ˜ë½í•˜ëŠ” ë””í´íŠ¸ í—¤ë”')` ğŸ‘‰ `'/'`ë¡œ ì„¤ì •í•˜ê²Œ ë˜ë©´ ì´ë¯¸ ì‹¤í–‰ì¤‘ì¸í˜¸
  ìŠ¤íŠ¸ë¥¼ ìë™ìœ¼ë¡œ ì‚¬ìš©í•˜ê²Œ ëœë‹¤
- `writeHead`

```jsx
...
  if (url === '/message' && method === 'POST') {
    fs.writeFileSync('message.txt', 'DUMMY');
    res.statusCode = 302;
    res.setHeader('Location', '/'); // setHeader('ìœ„ì¹˜ì§€ì •', ë¸Œë¼ìš°ì €ê°€ ìˆ˜ë½í•˜ëŠ” ë””í´íŠ¸ í—¤ë”')
    // res.writeHead('Location'); // í•œë²ˆì— ì—¬ëŸ¬ê°€ì§€ ë©”íƒ€ì •ë³´ë¥¼ ì‘ì„±í• ìˆ˜ìˆê²Œí•œë‹¤, ìƒíƒœì½”ë“œ 302
    return res.end();
  }
  res.setHeader('Content-Type', 'text/html');
  res.write('<html>');
  res.write('<head><title>My First Page</title></head>');
  res.write('<bode><h1>server start</h1></bode>');
  res.write('</html>');
```

## ğŸ”„ Streams & Buffers

```jsx
...

if (url === '/message' && method === 'POST') {
  const body = [];
  req.on('data', (chunk) => {
    console.log(chunk);
    body.push(chunk);
  }); // íŠ¹ì • ì´ë²¤íŠ¸ë¥¼ ë“¤ì„ ìˆ˜ ìˆìŒ -> ë°ì´í„° ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ëŠ” ë°ì— ë²„í¼ê°€ ë„ì›€ì„ ì¤€ë‹¤
  req.on('end', () => {
    // ë²„í¼ ì‚¬ìš© : ì²­í¬ë¥¼ ë°›ì€ í›„ ë‹¤ë£¨ê¸° ìœ„í•´ì„œ / Buffer : ì „ì—­ì—ì„œ ì‚¬ìš© ê°€ëŠ¥
    const parsedBody = Buffer.concat(body).toString();
    const message = parsedBody.split('=')[1];
    fs.writeFileSync('message.txt', message);
  });
  res.statusCode = 302; // ì‘ë‹µ ë°œìƒì´ ëë‚œí›„ì—ë„ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆëŠ” ê³„ì† ì‹¤í–‰ëœë‹¤
  res.setHeader('Location', '/'); // setHeader('ìœ„ì¹˜ì§€ì •', ë¸Œë¼ìš°ì €ê°€ ìˆ˜ë½í•˜ëŠ” ë””í´íŠ¸ í—¤ë”')
  // res.writeHead('Location'); // í•œë²ˆì— ì—¬ëŸ¬ê°€ì§€ ë©”íƒ€ì •ë³´ë¥¼ ì‘ì„±í• ìˆ˜ìˆê²Œí•œë‹¤, ìƒíƒœì½”ë“œ 302
  return res.end();
}
```

### â­ Stream

> ì§€ì†ì ì¸ í”„ë¡œì„¸ìŠ¤ : ë…¸ë“œê°€ ìš”ì²­ì„ í•œ ì²­í¬ì”© ë‹¤ ì½ê³ ë‚˜ì„œ, ìš”ì²­ ì „ì²´ë¥¼ ì½ê¸°ê¹Œì§€ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³ ë„ ê°ê°
> ì˜ ì²­í¬ë¥¼ ë‹¤ë£° ìˆ˜ ìˆìŒ.
>
> ì¦‰, **ë°ì´í„°ê°€ ë“¤ì–´ì˜¤ëŠ” ì™€ì¤‘ì—ë„ ì•±ì´ ì‹¤í–‰ë˜ëŠ” í•˜ë“œë“œë¼ì´ë¸Œë‚˜ ë…¸ë“œì•±ì´ ì‹¤í–‰ë˜ëŠ” ì„œë²„ì— ì“¸ ìˆ˜ ìˆìŒ
> .**

Node.jsëŠ” ë‹¤ ì´ëŸ°ì‹ìœ¼ë¡œ ì²˜ë¦¬ : ë°ì´í„°ëŠ” ë¯¸ë¦¬ ë‹¤ë£° ìˆ˜ ìˆìœ¼ë‚˜, ì²­í¬ëŠ” ë§ˆìŒëŒ€ë¡œ ë‹¤ë£° ìˆ˜ ì—†ìŒ!

### ğŸšŒ Buffers

> ì²­í¬ë¥¼ ì²´ê³„í™” í•˜ê¸° ìœ„í•´ ì‚¬ìš©! ë²„ì •ì´ë‘ ë¹„ìŠ·í•˜ë‹¤~
>
> ì—¬ëŸ¬ê°œì˜ ì²­í¬ë¥¼ ë³´ìœ í•˜ê³  íŒŒì‹±ì´ ëë‚˜ê¸° ì „ì— ì‘ì—… í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤

## ğŸ¥³ ì´ë²¤íŠ¸ ê¸°ë°˜ ì½”ë“œ ì‹¤í–‰ì˜ ëŒ€í•œ ì´í•´(`on`, `createServer`)

> Node.jsëŠ” í•¨ìˆ˜ë¥¼ í•¨ìˆ˜ì•ˆì— ë„£ìœ¼ë©´, ì•ˆì— ë„£ì€ í•¨ìˆ˜ë¥¼ ë‚˜ì¤‘ì— ì‹¤í–‰! (ë¹„ë™ê¸°)

1. ì‘ë‹µ ë°œì†¡ì€ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì‹¤í–‰ì´ ëë‚¬ë‹¤ëŠ” ì˜ë¯¸ê°€ ì•„ë‹ˆë‹¤! **ì‘ë‹µì´ ë°œì†¡ëœ í›„ì—ë„ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆëŠ”ê³„
   ì† ë°œìƒ**

```jsx
req.on('end', () => {
  const parsedBody = Buffer.concat(body).toString();
  const message = parsedBody.split('=')[1];
  fs.writeFileSync('message.txt', message);
});
```

2. ë™ì‹œì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆì˜ ì‘ë‹µì— ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆëŠ” ì–´ë– í•œ ì²˜ë¦¬ë¥¼ í•˜ëŠ”ê±´ ì˜ëª»ëœ ì„¤ì • ğŸ‘‰ 1ï¸âƒ£ ì‘ë‹µì½”ë“œë¥¼
   ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì•ˆì— ë„£ì–´ì•¼í•œë‹¤

```jsx
// 1ï¸âƒ£ ì‘ë‹µì½”ë“œë¥¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì•ˆì— ë„£ê¸°
req.on('end', () => {
  const parsedBody = Buffer.concat(body).toString();
  const message = parsedBody.split('=')[1];
  fs.writeFileSync('message.txt', message);

  res.statusCode = 302;
  res.setHeader('Location', '/');
  return res.end();
});
```

3. ë¹„ë™ê¸° í•¨ìˆ˜ì¼ë•Œì—ëŠ” Node.jsê°€ í•´ë‹¹ í•¨ìˆ˜ë¥¼ ë°”ë¡œ ì‹¤í–‰í•˜ì§€ ì•Šê³  ì½”ë“œë¥¼ ì²˜ìŒ ì ‘í–‡ì„ë•Œ ë‚´ë¶€ì ìœ¼ë¡œ ì´ë²¤
   íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ í•˜ë‚˜ ì¶”ê°€í•œë‹¤. (Node.jsëŠ” ëª¨ë“  ë¦¬ìŠ¤ë„ˆë“¤ì„ ë‚´ë¶€ì ìœ¼ë¡œ ê´€ë¦¬í•œë‹¤.)

   ```jsx
   // ì´ê²½ìš°ì—ëŠ” req.onì˜ end ì´ë²¤íŠ¸ê°€ ìë™ìœ¼ë¡œ ì‹¤í–‰
   req.on('end', () => {
      ...
   })
   ```

4. ì‹¤í–‰ ì™„ë£Œ í›„ í•´ë‹¹ í•¨ìˆ˜ë¥¼ ëŒ€ì‹  í˜¸ì¶œí•´ì¤Œ (Node.jsì— ì´ë²¤íŠ¸ì™€ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆê°€ ì íŒ ëª…ë¶€ê°€ ìˆë‹¤!!) ìœ„
   ì½”ë“œì˜ ì½œë°±í•¨ìˆ˜ê°€ ë¦¬ìŠ¤ë„ˆë¼ê³  ìƒê°í•˜ë©´ í¸í•˜ë‹¤!

5. Node.jsê°€ ìš”ì²­ ë¶„ì„ì„ ì™„ë£Œí•œ í›„, ëª…ë¶€(registry)ë¥¼ ë³´ë©´ì„œ "ìš”ì²­ì„ ë‹¤ ì²˜ë¦¬ í–ˆìœ¼ë‹ˆ ì´ì œ `end` ì´ë²¤íŠ¸
   ë¥¼ ë°œì†¡í•˜ë ¤ë©´ ì´ë²¤íŠ¸ì˜ ë¦¬ìŠ¤ë„ˆë¥¼ ë´ì•¼ê² ë‹¤!!" ë¼ê³  ìƒê°í•´ì„œ (ìœ„ì˜ ê²½ìš°ì—ì„œëŠ”)**ì½œë°±í•¨ìˆ˜**ì™€ ë“±ë¡í–ˆ
   ë˜ **ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ í˜¸ì¶œ**

```markdown
ë°˜í™˜ ì‘ë‹µ : 1ï¸âƒ£ `if(url === '/message' && method === 'POST')`ì„ ì´ í•¨ìˆ˜ : `return res.end()`ë¡œ ì˜®ê¸´ê²½
ìš°

1. (1ï¸âƒ£ ifë¬¸)ì— ë„ë‹¬í•´ì„œ ì¡°ê±´ì´ ë§ëŠ”ë‹¤ë©´ ê·¸ ì•ˆìœ¼ë¡œ ë“¤ì–´ê°
2. ë‘ í•¸ë“¤ëŸ¬ë¥¼ ë“±ë¡ `req.on('data',...)`, `req.on('end',...)` : ì´ ë‘ í•¨ìˆ˜ë¥¼ ë°”ë¡œ ì‹¤í–‰í•˜ì§€ ì•ŠìŒ
3. í•¨ìˆ˜ê°€ ë‚´ë¶€ì ìœ¼ë¡œ ì´ë²¤íŠ¸ ì´ë¯¸í„°ì— ë“±ë¡
4. ë°”ë¡œ ë‹¤ìŒ ì¤„ë¡œ ë„˜ì–´ê°

## ğŸ”œ ì´ëŸ° ì„¤ì •ì´ ì¤‘ìš”í•œ ì´ìœ 

â­ Node.jsê°€ íŒŒì¼ ì‘ì„±ì™„ë£Œ ì „ê¹Œì§€ ë©ˆì¶”ëŠ”ë° ê·¸ëŸ¬ë©´ ì„œë²„ê°€ ëŠë ¤ì§€ê³  ì™„ë£Œë˜ê¸° ì „ê¹Œì§€ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì„ í¬
í•¨í•´ ì•„ë¬´ê²ƒë„ í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸!!!
```

6. ê²°ë¡ !!!  
   í•˜ë‹¨ ì½”ë“œì— ë„ˆë¬´ ë¹¨ë¦¬ ë„ë‹¬í•˜ì§€ ì•Šê²Œ `return`ì„ ë¶™ì—¬ì„œ ë¨¼ì € ì‹¤í–‰ë˜ë„ë¡ í•œë‹¤!!!! (í•˜ë‹¨ì½”ë“œëŠ” ì‹¤í–‰ì•ˆ
   ë¨ã…‹)

```jsx
{
  ...
  ...
  return req.on('end', () => {
    // ë²„í¼ ì‚¬ìš© : ì²­í¬ë¥¼ ë°›ì€ í›„ ë‹¤ë£¨ê¸° ìœ„í•´ì„œ / Buffer : ì „ì—­ì—ì„œ ì‚¬ìš© ê°€ëŠ¥
    const parsedBody = Buffer.concat(body).toString();
    const message = parsedBody.split('=')[1];
    // writeFIleSync : ì½”ë“œ ì‹¤í–‰ì„ ë§‰ëŠ” ë©”ì„œë“œ (íŒŒì¼ì´ ì™„ë£Œë ë•Œê¹Œì§€ ë‹¤ìŒ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ì§€ ì•ŠëŠ” ë™ê¸°í™” ëª¨ë“œ)
    fs.writeFile('message.txt', message);

    res.statusCode = 302;
    res.setHeader('Location', '/'); // setHeader('ìœ„ì¹˜ì§€ì •', ë¸Œë¼ìš°ì €ê°€ ìˆ˜ë½í•˜ëŠ” ë””í´íŠ¸ í—¤ë”')
    return res.end();

  });

  res.setHeader('Content-Type', 'text/html');
  res.write('<html>');
  res.write('<head><title>My First Page</title></head>');
  res.write('<bode><h1>server start</h1></bode>');
  res.write('</html>');
  res.end();
}
```

## â›” Blocking & NoneBlocking Code

> Node.jsëŠ” ë…¼ë¸”ë¡œí‚¹ ë°©ì‹ìœ¼ë¡œ ì½”ë“œê°€ ì§„í–‰ëœë‹¤!

### ì‹¤í–‰ ìˆœì„œ

1. ìˆ˜ë§ì€ ì½œë°±ê³¼ ì´ë²¤íŠ¸ë¥¼ ë“±ë¡í•´ë‘ë©´ íŠ¹ì • ì‘ì—…ì´ ëë‚œí›„ì— Node.jsê°€ í•´ë‹¹ ì½”ë“œë¥¼ ì‹¤í–‰ì‹œí‚´
2. js ìŠ¤ë ˆë“œëŠ” í•­ìƒ ìƒˆ ì´ë²¤íŠ¸ë‚˜ìƒˆë¡œ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì„ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ!
3. ì‘ì—…ì´ ì—†ìœ¼ë©´ í”„ë¡œê·¸ë¨ì„ ëë‚¸ë‹¤! `ì„œë²„ì—ì„œëŠ” ê·¸ëŸ´ ì¼ì´ ì—†ìŒ : ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆê°€ ìˆê¸°ë•Œë¬¸ì—`

- **parameter**
  - `file` : ì €ì¥í•  íŒŒì¼ì˜ ê²½ë¡œ, íŒŒì¼ëª…, í™•ì¥ìëª…ì„ ê¸°ì…
  - `data` : íŒŒì¼ì— ê¸°ë¡ë  ë°ì´í„° ì–‘ì‹
  - `options`
    - `encoding` : íŒŒì¼ì˜ ì¸ì½”ë”©ì„ ì§€ì •í•˜ëŠ” ë¬¸ìì—´ (default : utf8)
    - `mode` : íŒŒì¼ ëª¨ë“œë¥¼ ì§€ì •í•˜ëŠ” ì •ìˆ˜ê°’ (default : 0o666)
    - `flag` : íŒŒì¼ì— ì“°ëŠ” ë™ì•ˆ ì‚¬ìš©ë˜ëŠ” í”Œë˜ê·¸ë¥¼ ì§€ì •í•˜ëŠ” ë¬¸ìì—´(default : w)
  - `callback` : ë©”ì†Œë“œê°€ ì‹¤í–‰ë ë–„ í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜
    - `err` : ì‘ì—…ì— ì‹¤íŒ¨í•˜ë©´ ë°˜í™˜ë˜ëŠ” ì˜¤ë¥˜

---

### â“ `writeFileSync(file,data,options)`

ì½”ë“œ ì‹¤í–‰ì„ ë§‰ëŠ” ë©”ì„œë“œ (íŒŒì¼ì´ ì™„ë£Œë ë•Œê¹Œì§€ ë‹¤ìŒ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ì§€ ì•ŠëŠ” **_ë™ê¸°_**í™” ëª¨ë“œ ) **ë§¤ìš° ì§§
ì€íŒŒì¼ì˜ ì½”ë“œ**ì—ì„œë§Œ ì‚¬ìš©í•˜ê¸¸ ê¶Œì¥!!

> â” `ğŸ”ªë§Œì•½` ì—„ì²­ **í° ìš©ëŸ‰ì˜ íŒŒì¼ì„ ì½ê±°ë‚˜ ë³µì‚¬**í•˜ëŠ” ë“±ì˜ ìƒí™©ì—ì„œ <u>ì½”ë“œ ì‹¤í–‰ì„ ë§‰ëŠ”ê²½ìš°</u>?
>
> â— ë‹¤ìŒ ì¤„ê³¼ ë‹¤ë¥¸ ëª¨ë“  ì½”ë“œê°€ íŒŒì¼ ìš´ì˜ì´ ì™„ë£Œë ë•Œê¹Œì§€ **ğŸ›‘ì‹¤í–‰ì„ ë©ˆì¶¤ğŸ›‘** + ìƒˆë¡œ ìœ ì…ë˜ëŠ” **ìš”ì²­
> ë“¤ë„ ì·¨ê¸‰ë˜ì§€ ì•ŠìŒ** ğŸ‘‰ `writeFile` ì‚¬ìš©

```jsx
{
  ...
  ...
    return req.on('end', () => {
      const parsedBody = Buffer.concat(body).toString();
      const message = parsedBody.split('=')[1];

      fs.writeFile('message.txt', message, (err) => {
        res.statusCode = 302;
        res.setHeader('Location', '/');
        return res.end();
      });
    });
  }
```

### â“ `writeFile(file, data, options, callback)` ì„ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ì´ìœ !!

- ğŸŒŸ ì§€ì •ëœ ë°ì´í„°ë¥¼ íŒŒì¼ì— ë¹„ë™ê¸°ì ìœ¼ë¡œ ì“°ëŠ”ë° ì‚¬ìš©
- ê²½ë¡œì™€ ë°ì´í„°ë¥¼ ë°›ì•„ë“¤ì¼ ë¿ë§Œ ì•„ë‹ˆë¼ ì„¸ë²ˆì§¸ ì¸ìˆ˜ì¸ ì½œë°±ê¹Œì§€ë„ í¬í•¨í•œë‹¤!!
- íŒŒì¼ì´ ìˆìœ¼ë©´ ëŒ€ì²´ëœë‹¤!
- 'ì˜µì…˜' íŒŒë¼ë¯¸í„°ëŠ” ë©”ì„œë“œì˜ ê¸°ëŠ¥ì„ ìˆ˜ì •í•˜ëŠ”ë° ì‚¬ìš© ê°€ëŠ¥!

ë…¸ë“œëŠ” ì•”ë¬µì ìœ¼ë¡œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ë“±ë¡ì‹œí‚µë‹ˆë‹¤.

```jsx
return req.on('end', () => {
  const parsedBody = Buffer.concat(body).toString();
  const message = parsedBody.split('=')[1];

  fs.writeFile('message.txt', message, (err) => {
    // ì•„ë˜ ì‘ë‹µì€ íŒŒì¼ ì‘ì—…ì´ ì™„ë£Œëœ ê²½ìš°ì—ë§Œ ì „ì†¡ë˜ì–´ì•¼í•¨! ë‹¹ì—°!
    res.statusCode = 302;
    res.setHeader('Location', '/');
    return res.end();
  });
});
```

## ğŸ§ Module ì‹œìŠ¤í…œ

> íŒŒì¼ ë‚´ìš©ì˜ ìºì‹œê°€ ì €ì¥ë˜ê³  ì™¸ë¶€ì—ì„œ ìˆ˜ì •í• ìˆ˜ âŒ ğŸ‘‰ ì›ë³¸ ìˆ˜ì • ë¶ˆê°€ëŠ¥ , ì™¸ë¶€ì—ì„œ ì½ì„ ìˆ˜ ìˆëŠ” ë‚´ìš©
> ë§Œ ë‚´ë³´ë‚¸ë‹¤

1. ëª¨ë“ˆ í•˜ë‚˜ë§Œ ë‚´ë³´ë‚´ê¸°
   1. ```jsx
      module.exports = requestHandler;
      ```
2. ëª¨ë“ˆ ì—¬ëŸ¬ê°œ ë‚´ë³´ë‚´ê¸°
   1. ```jsx
      module.exports = {
        handler: requestHandler,
        someText: 'ì‹œí—˜ìš© í…ìŠ¤íŠ¸',
      };
      ```
   2. ```jsx
      (module.)exports.handler = requestHandler;
      (module.)exports.someText = 'ì‹œí—˜ìš© í…ìŠ¤íŠ¸';
      ```

# ğŸ’ 5ê°• : Express.jsì‘ì—… (frameWork)

## âš™ï¸ Setting

```shell
yarn init
```

### ğŸ˜ˆ Nodemon ì„¤ì¹˜

> ì„œë²„ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ì¬ì‹œë™í•˜ì§€ ì•Šì•„ë„ ë˜ê²Œí•˜ëŠ” íŒ¨í‚¤ì§€

```shell
npm install -g nodemon
```

### ğŸš… Express.js ì„¤ì¹˜

```shell
// npm
npm install --save express

// yarn
yarn add express
```

ğŸ‘‰ `--save` : í”„ë¡œë•ì…˜ ì˜ì¡´ì„± (ì‹¤í–‰í•˜ê²Œë  ëª¨ë“  ì„œë²„ì™€ ì»´í“¨í„°ì— ì„¤ì¹˜ë˜ì–´ì•¼í•¨!!!)

---

## ğŸš† Express.js

> í•„ìˆ˜ì ì¸ ì‘ì—…ì´ë¼ë˜ê°€ ì‹ ê²½ì“°ê³  ì‹¶ì§€ì•Šì€ ì„¸ë¶€ë‚´ìš©ì„ ì™¸ë¶€ì— ë§¡ê¸¸ ìˆ˜ ìˆê²Œ ë„ì™€ì£¼ê³ , ì¼ë ¨ì˜ ê·œì¹™ê³¼ ë”
> ìš± ê¹”ë”í•œ ì½”ë“œë¥¼ ì‘ì„±í•˜ê³  í•µì‹¬ì ì¸ ì‘ì—…ì— ì§‘ì¤‘í•  ìˆ˜ ìˆê²Œ ë„ì™€ì£¼ëŠ” ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ì œê³µ

- íŒŒì‹±ì„ ëŒ€ì‹ í•´ ì£¼ê¸° ìœ„í•œ íŒ¨í‚¤ì§€ë¥¼ ì‰½ê²Œ ì„¤ì¹˜í•˜ê²Œ ë„ì™€ì¤€ë‹¤~
- ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì •ì˜í•˜ëŠ” ì½”ë“œ. ì¦‰, ë‹¤ë¥¸ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œë¶€í„° ì°¨ë³„í™”í•˜ëŠ” ìš”ì†Œ
- ë¬´ê±°ìš´ ì‘ì—…ì€ ë‹¤ í”„ë ˆì„ ì›Œí¬ê°€ í•´ì¤Œ~ã…‹

Express.jsëŠ” `1) ë¯¸ë“¤ì›¨ì–´`ì™€ ì—°ê´€ì´ ë˜ì–´ìˆìŒ. â—ì„œë“œíŒŒí‹° íŒ¨í‚¤ì§€ë¥¼ ì‰½ê²Œ Express.jsì— ì¥ì°©í•˜ì—¬ íŠ¹ì • ê¸°
ëŠ¥ì„ ì¶”ê°€â—

## ğŸ–• ë¯¸ë“¤ì›¨ì–´

> ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì„ `express.js`ì— ì˜í•œ ë‹¤ì–‘í•œ í•¨ìˆ˜ë¥¼ í†µí•´ ìë™ìœ¼ë¡œ ì´ë™  
> (= ë‹¨ì¼ ìš”ì²­ í•¸ë“¤ëŸ¬ë¥¼ ë³´ìœ í•˜ëŠ” ëŒ€ì‹  ì‘ë‹µì„ ì „ì†¡í•˜ê¸° ì „ê¹Œì§€ ìš”ì²­ì´ í†µê³¼í•˜ê²Œ ë  ë‹¤ì–‘í•œ í•¨ìˆ˜ë“¤ì„ ì—°ê²°
> í• ê°€ëŠ¥ì„± í™•ë³´ ğŸ‘‰ í•˜ë‚˜ì˜ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì²˜ë¦¬í•˜ê¸°ë³´ë‹¤ëŠ” ì½”ë“œë¥¼ ì¡°ê°ë“¤ë¡œ ë¶„í• í• ìˆ˜ ìˆëŠ”ê²ƒì´
> Express.jsì˜íŠ¹ì§•)

- ìƒë‹¨ì— ìˆëŠ” ë¯¸ë“¤ì›¨ì–´ê°€ ë¨¼ì € ì‹¤í–‰ë˜ë©° í•˜ë‹¨ìœ¼ë¡œ ê°ˆìˆ˜ë¡ ë‚˜ì¤‘ì— ì‹¤í–‰
- nextë¥¼ í˜¸ì¶œ ì—¬ë¶€ì— ë”°ë¼ ë‹¤ìŒ <u>**ë¯¸ë“¤ì›¨ì–´ê°€ ì‹¤í–‰ë  ìˆ˜ë„ ìˆê³  ì‹¤í–‰ë˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆë‹¤.**</u>
- ë¯¸ë“¤ì›¨ì–´ëŠ” ì—¬ëŸ¬ê°œ ì„ ì–¸ ë  ìˆ˜ ìˆìŒ.

---

## âœï¸ Express ë³¸ê²© ì‚¬ìš©í•´ë³´ê¸°

```jsx
const express = require('express');
const app = express();

// 1. ë¯¸ë“¤ì›¨ì–´ ì‚¬ìš©ë°©ë²•
// use : ìƒˆë¡œìš´ ë¯¸ë“¤ì›¨ì–´ í•¨ìˆ˜ ì¶”ê°€
app.use((req, res, next) => {
  // ë‹¤ìŒ ë¯¸ë“¤ì›¨ì–´ë¡œ ìš”ì²­ì´ ì´ë™í•  ìˆ˜ ìˆê²Œ ì‹¤í–‰ë˜ì–´ì•¼í•¨
  console.log('In the Middleware');
  next();
});
```

### `app.use()`

```jsx
// ì´ ë¶€ë¶„ì´ ë¯¸ë“¤ì›¨ì–´ í•¨ìˆ˜ ì˜ì—­
(req, res, next) => {
  console.log('In the Middleware');
  next();
};
```

#### `next()`

> ë¯¸ë“¤ì›¨ì–´ í•¨ìˆ˜ì— ëŒ€í•œ ì½œë°± íŒŒë¼ë¯¸í„°.  
> `next()`ë¥¼ ì‘ì„±í•˜ê²Œ ë˜ë©´ ë‹¤ìŒ ë¯¸ë“¤ì›¨ì–´ í•¨ìˆ˜ê°€ í˜¸ì¶œë¨
